/* app/global.css (komplett, oppdatert) */
@import 'leaflet/dist/leaflet.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ------------------------------------------------------------------
   CSS-variabler brukt på tvers av layout-komponentene
-------------------------------------------------------------------*/
:root {
  --nav-h: 64px;        /* Høyden til BottomNav */
  --header-h: 56px;     /* Reservehøyde til evt. topp-header */
  /* Avstand som sikrer klaring for BottomNav + iOS-Home-indikator */
  --safe-bottom: calc(var(--nav-h) + env(safe-area-inset-bottom));

  /* Brand-farger (hentes fra Tailwind-paletten) */
  --color-primary: theme(colors.primary.DEFAULT);
  --color-primary-light: theme(colors.primary.light);
  --color-primary-dark: theme(colors.primary.dark);

  /* Font-utjevning */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

html,
body {
  @apply h-full;
}

body {
  /* Tailwind neutral-palett holder seg i tråd med appens lyse modus.
     Dark-mode håndteres av Tailwinds 'dark:'-klasser. */
  @apply bg-neutral-100 text-neutral-800 flex flex-col font-sans;
}

/* ------------------------------------------------------------------
   Leaflet – fikser sprite-URLer når bundlet
-------------------------------------------------------------------*/
.leaflet-control-attribution a,
.leaflet-control-layers-toggle {
  background-image: none !important;
}
.leaflet-marker-icon,
.leaflet-marker-shadow {
  background-image: url('~leaflet/dist/images/marker-icon.png');
}
.leaflet-marker-icon.leaflet-interactive[src$='marker-icon-2x.png'] {
  background-image: url('~leaflet/dist/images/marker-icon-2x.png');
}
.leaflet-marker-shadow {
  background-image: url('~leaflet/dist/images/marker-shadow.png');
}

/* ------------------------------------------------------------------
   Scrollbar (WebKit) + Firefox
-------------------------------------------------------------------*/
::-webkit-scrollbar {
  @apply w-2 h-2;
}
::-webkit-scrollbar-track {
  @apply bg-neutral-200 rounded-full;
}
::-webkit-scrollbar-thumb {
  @apply bg-neutral-400 rounded-full hover:bg-neutral-500;
}

* {
  scrollbar-width: thin;
  scrollbar-color: theme('colors.neutral.400') theme('colors.neutral.200');
}

/* Placeholder-farge */
::placeholder {
  @apply text-neutral-400;
}

/* ------------------------------------------------------------------
   Tailwind component-klasser
-------------------------------------------------------------------*/
@layer components {
  .btn {
    @apply px-4 py-2 rounded-lg font-semibold transition-colors duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary-dark focus:ring-opacity-50;
  }
  .btn-primary {
    @apply btn bg-primary text-white hover:bg-primary-dark disabled:bg-neutral-300 disabled:cursor-not-allowed;
  }
  .btn-secondary {
    @apply btn bg-secondary text-white hover:bg-secondary-dark disabled:bg-neutral-300 disabled:cursor-not-allowed;
  }
  .btn-ghost {
    @apply btn text-primary hover:bg-primary/10;
  }
  .input-field {
    @apply block w-full px-4 py-2.5 rounded-lg border border-neutral-300 bg-white text-neutral-900
           placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary
           disabled:bg-neutral-100 disabled:text-neutral-500;
  }

  /* ----------------------------------------------------------------
     NY: .glass-card
     Halvtransparent hvit bakgrunn + blur til kort og overlays
  -----------------------------------------------------------------*/
  .glass-card {
    @apply bg-white/60 backdrop-blur-[4px] shadow-lg rounded-2xl;
  }

  /* ----------------------------------------------------------------
     NY: safe-fixed-bottom
     Gir padding-bottom som matcher --safe-bottom, slik at
     full-bredde knapper ikke kolliderer med BottomNav + Home-indikator.
  -----------------------------------------------------------------*/
  .safe-fixed-bottom {
    padding-bottom: var(--safe-bottom);
  }
}

/* Dark-mode-variant for .glass-card – legger seg utenfor @layer */
.dark .glass-card {
  background-color: rgba(23, 23, 23, 0.8);
}