/* app/global.css (komplett, oppdatert) */
@import 'leaflet/dist/leaflet.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ------------------------------------------------------------------
   CSS-variabler brukt på tvers av layout-komponentene
-------------------------------------------------------------------*/
:root {
  --nav-h: 64px;        /* Høyden til BottomNav */
  --header-h: 56px;     /* Reservehøyde til evt. topp-header */
  /* Avstand som sikrer klaring for BottomNav + iOS-Home-indikator */
  --safe-bottom: calc(var(--nav-h) + env(safe-area-inset-bottom));

  /* Brand-farger (hentes fra Tailwind-paletten) */
  --color-primary: theme(colors.primary.DEFAULT);
  --color-primary-light: theme(colors.primary.light);
  --color-primary-dark: theme(colors.primary.dark);

  /* Font-utjevning */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

html,
body {
  @apply h-full;
}

body {
  /* Tailwind neutral-palett holder seg i tråd med appens lyse modus.
     Dark-mode håndteres av Tailwinds 'dark:'-klasser. */
  @apply bg-neutral-100 text-neutral-800 flex flex-col font-sans;
}

/* ------------------------------------------------------------------
   Leaflet – fikser sprite-URLer når bundlet
-------------------------------------------------------------------*/
.leaflet-control-attribution a,
.leaflet-control-layers-toggle {
  background-image: none !important;
}
.leaflet-marker-icon,
.leaflet-marker-shadow {
  background-image: url('~leaflet/dist/images/marker-icon.png');
}
.leaflet-marker-icon.leaflet-interactive[src$='marker-icon-2x.png'] {
  background-image: url('~leaflet/dist/images/marker-icon-2x.png');
}
.leaflet-marker-shadow {
  background-image: url('~leaflet/dist/images/marker-shadow.png');
}

/* ------------------------------------------------------------------
   Scrollbar (WebKit) + Firefox
-------------------------------------------------------------------*/
::-webkit-scrollbar {
  @apply w-2 h-2;
}
::-webkit-scrollbar-track {
  @apply bg-neutral-200 rounded-full;
}
::-webkit-scrollbar-thumb {
  @apply bg-neutral-400 rounded-full hover:bg-neutral-500;
}

* {
  scrollbar-width: thin;
  scrollbar-color: theme('colors.neutral.400') theme('colors.neutral.200');
}

/* Placeholder-farge */
::placeholder {
  @apply text-neutral-400;
}

/* ------------------------------------------------------------------
   Tailwind component-klasser
-------------------------------------------------------------------*/
@layer components {
  .btn {
    @apply px-4 py-2 rounded-lg font-semibold transition-colors duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary-dark focus:ring-opacity-50;
  }
  .btn-primary {
    @apply btn bg-primary text-white hover:bg-primary-dark disabled:bg-neutral-300 disabled:cursor-not-allowed;
  }
  .btn-secondary {
    @apply btn bg-secondary text-white hover:bg-secondary-dark disabled:bg-neutral-300 disabled:cursor-not-allowed;
  }
  .btn-ghost {
    @apply btn text-primary hover:bg-primary/10;
  }
  .input-field {
    @apply block w-full px-4 py-2.5 rounded-lg border border-neutral-300 bg-white text-neutral-900
           placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary
           disabled:bg-neutral-100 disabled:text-neutral-500;
  }

  /* ----------------------------------------------------------------
     NY: .glass-card
     Halvtransparent hvit bakgrunn + blur til kort og overlays
  -----------------------------------------------------------------*/
  .glass-card {
    @apply bg-white/80 backdrop-blur-[2px] backdrop-brightness-110
           border border-white/50 shadow-lg rounded-2xl;
  }

  /* ----------------------------------------------------------------
     NY: safe-fixed-bottom
     Gir padding-bottom som matcher --safe-bottom, slik at
     full-bredde knapper ikke kolliderer med BottomNav + Home-indikator.
  -----------------------------------------------------------------*/
  .safe-fixed-bottom {
    padding-bottom: var(--safe-bottom);
  }
}

/* Dark-mode-variant for .glass-card – legger seg utenfor @layer */
.dark .glass-card {
  background-color: rgba(23, 23, 23, 0.8);
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;
    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;
    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --ring: 0 0% 3.9%;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem;
  }
  .dark {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;
    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;
    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;
    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 83.1%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}